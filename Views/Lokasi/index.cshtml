@model List<AparWebAdmin.Models.Lokasi>
@using System.Globalization

@{
    ViewData["Title"] = "Daftar Lokasi";
}

<div class="container-fluid">
  <div class="card">
    <div class="card-header d-flex justify-content-between">
      <h3>@ViewData["Title"]</h3>
      <a asp-action="Create" class="btn btn-primary">
        <i class="fas fa-plus"></i> Tambah Lokasi
      </a>
    </div>
    <div class="card-body">
      @if(ViewBag.Error != null){
        <div class="alert alert-danger">@ViewBag.Error</div>
      }
      @if(TempData["Success"] != null){
        <div class="alert alert-success">@TempData["Success"]</div>
      }
      <div class="table-responsive">
        <table class="table table-striped">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Nama Lokasi</th>
              <th>PIC Badge</th>
              <th>Jabatan PIC</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody>
            @foreach(var item in Model){
              <tr>
                <td>@item.Id</td>
                <td>@item.Nama</td>
                <td>@(item.PICBadgeNumber ?? "-")</td>
                <td>@(item.PICJabatan   ?? "-")</td>
                <td>
                  @(item.Lat.HasValue 
                    ? item.Lat.Value.ToString("F6", CultureInfo.InvariantCulture)
                    : "-")
                </td>
                <td>
                  @(item.Long.HasValue 
                    ? item.Long.Value.ToString("F6", CultureInfo.InvariantCulture)
                    : "-")
                </td>
                <td>
                  <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-sm btn-warning">
                    <i class="fas fa-edit"></i>
                  </a>
                  <form asp-action="Delete" asp-route-id="@item.Id"
                        method="post" class="d-inline">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="btn btn-sm btn-danger"
                      onclick="return confirm('Hapus lokasi @item.Nama ?');">
                      <i class="fas fa-trash"></i>
                    </button>
                  </form>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
